---
phase: 02-interactive-features
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/donations/givebutter-widget.tsx
  - src/app/(public)/ways-to-give/page.tsx
autonomous: true
user_setup:
  - service: givebutter
    why: "Donation form widget requires account and campaign ID"
    env_vars:
      - name: NEXT_PUBLIC_GIVEBUTTER_WIDGET_ID
        source: "GiveButter Dashboard -> Campaigns -> Select campaign -> Widgets -> Copy widget ID"
    dashboard_config:
      - task: "Create a donation campaign (if not already created)"
        location: "GiveButter Dashboard -> Campaigns -> Create Campaign"

must_haves:
  truths:
    - "Visitor can see the GiveButter donation widget on Ways to Give page"
    - "Widget loads without blocking page render"
    - "Widget allows completing a donation (when configured with real ID)"
  artifacts:
    - path: "src/components/donations/givebutter-widget.tsx"
      provides: "Reusable GiveButter widget component"
      exports: ["GivebutterWidget"]
    - path: "src/app/(public)/ways-to-give/page.tsx"
      provides: "Updated page with embedded donation form"
      contains: "GivebutterWidget"
  key_links:
    - from: "src/app/(public)/ways-to-give/page.tsx"
      to: "src/components/donations/givebutter-widget.tsx"
      via: "import and render"
      pattern: "import.*GivebutterWidget"
---

<objective>
Integrate GiveButter donation widget into the Ways to Give page.

Purpose: Enable visitors to complete donations directly on the website without redirecting to an external platform. This fulfills requirements DON-01 (embed GiveButter form) and DON-02 (impact statements already exist on page).

Output: GiveButter widget component and updated Ways to Give page with working donation embed.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-interactive-features/02-RESEARCH.md

Key patterns from existing codebase:
- Client components use "use client" directive
- Tailwind for styling with dark theme (bg-white/5, border-white/10, etc.)
- Next.js Script component for external scripts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create GiveButter widget component</name>
  <files>src/components/donations/givebutter-widget.tsx</files>
  <action>
Create a reusable GiveButter widget component:

1. Create src/components/donations/givebutter-widget.tsx as a client component
2. Use Next.js Script component with strategy="afterInteractive" to load GiveButter library
3. Render the givebutter-widget custom element with configurable props (widgetId, align)
4. Add TypeScript declarations for the custom element in JSX.IntrinsicElements
5. Use min-height container (500px) to prevent layout shift during checkout flow
6. Accept widgetId from environment variable NEXT_PUBLIC_GIVEBUTTER_WIDGET_ID with fallback to prop

Follow the pattern from RESEARCH.md Pattern 1: GiveButter Widget Integration.

Handle the case where widget ID is not configured by showing a fallback message.
  </action>
  <verify>
TypeScript compiles: `npm run build` succeeds with no errors related to givebutter-widget.tsx
  </verify>
  <done>
GivebutterWidget component exists, accepts widgetId prop, loads GiveButter script, and renders custom element with proper TypeScript types.
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrate widget into Ways to Give page</name>
  <files>src/app/(public)/ways-to-give/page.tsx</files>
  <action>
Update the Ways to Give page to use the GiveButter widget:

1. Import GivebutterWidget from @/components/donations/givebutter-widget
2. Replace the placeholder div (lines 91-109 with "Donation form coming soon") with the GivebutterWidget component
3. Keep the impact statements section as-is (already exists and matches DON-02)
4. Pass widgetId from process.env.NEXT_PUBLIC_GIVEBUTTER_WIDGET_ID
5. Center the widget with align="center"
6. Maintain the existing section styling (bg-white/5 py-16 md:py-24)

Preserve all other content on the page (hero, impact statements, other ways to give, tax info).
  </action>
  <verify>
1. `npm run dev` - page loads without errors
2. Visit http://localhost:3000/ways-to-give - widget container appears (shows fallback if no widget ID configured)
3. No console errors related to GiveButter or Script component
  </verify>
  <done>
Ways to Give page displays GiveButter widget where placeholder was. Impact statements remain visible above the widget. Page renders without errors.
  </done>
</task>

<task type="auto">
  <name>Task 3: Add environment variable and verify build</name>
  <files>.env.example</files>
  <action>
1. Add NEXT_PUBLIC_GIVEBUTTER_WIDGET_ID to .env.example with a placeholder value and comment
2. If .env.local exists, add the variable there too (with placeholder)
3. Run full build to ensure everything compiles

Example for .env.example:
```
# GiveButter donation widget ID
# Get from: GiveButter Dashboard -> Campaigns -> Select campaign -> Widgets
NEXT_PUBLIC_GIVEBUTTER_WIDGET_ID=your-widget-id
```
  </action>
  <verify>
1. `npm run build` completes successfully
2. .env.example contains NEXT_PUBLIC_GIVEBUTTER_WIDGET_ID with documentation comment
  </verify>
  <done>
Environment variable documented in .env.example. Build succeeds. Widget shows appropriate fallback when ID not configured.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run build` succeeds without errors
2. `npm run dev` and visit /ways-to-give shows widget container
3. Impact statements (Your Impact section) still visible above donation widget
4. Other Ways to Give section still visible below
5. Tax information section still visible at bottom
</verification>

<success_criteria>
- GivebutterWidget component created with TypeScript types
- Ways to Give page uses widget instead of placeholder
- Environment variable documented
- Build passes
- Page renders correctly with all sections intact
</success_criteria>

<output>
After completion, create `.planning/phases/02-interactive-features/02-01-SUMMARY.md`
</output>
