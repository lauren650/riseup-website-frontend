---
phase: 05-public-sponsorship-page
plan: 02
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - src/app/(public)/become-a-sponsor/page.tsx
  - src/components/sponsors/pricing-table.tsx
  - src/components/sponsors/interest-form.tsx
  - src/components/sponsors/confirmation-modal.tsx
  - src/app/(public)/partners/page.tsx
autonomous: false

must_haves:
  truths:
    - "User can access Become a Sponsor page from Partners page link"
    - "User can view sponsorship tiers with names, prices, and benefits"
    - "User can submit interest form with name, email, phone, company"
    - "User sees modal confirmation after successful submission"
  artifacts:
    - path: "src/app/(public)/become-a-sponsor/page.tsx"
      provides: "Public sponsorship page with SSR package data"
      contains: "sponsorship_packages"
      min_lines: 40
    - path: "src/components/sponsors/pricing-table.tsx"
      provides: "Horizontal pricing table component"
      exports: ["PricingTable"]
    - path: "src/components/sponsors/interest-form.tsx"
      provides: "Interest form with react-hook-form and useActionState"
      exports: ["InterestForm"]
    - path: "src/components/sponsors/confirmation-modal.tsx"
      provides: "AnimatePresence success modal"
      exports: ["ConfirmationModal"]
    - path: "src/app/(public)/partners/page.tsx"
      provides: "Link to become-a-sponsor page"
      contains: "become-a-sponsor"
  key_links:
    - from: "src/app/(public)/become-a-sponsor/page.tsx"
      to: "supabase"
      via: "server component fetch"
      pattern: "from\\(\"sponsorship_packages\"\\)"
    - from: "src/components/sponsors/interest-form.tsx"
      to: "src/lib/actions/sponsor-interest.ts"
      via: "useActionState"
      pattern: "submitSponsorInterest"
    - from: "src/components/sponsors/interest-form.tsx"
      to: "src/components/sponsors/confirmation-modal.tsx"
      via: "success state triggers modal"
      pattern: "ConfirmationModal"
    - from: "src/app/(public)/partners/page.tsx"
      to: "src/app/(public)/become-a-sponsor/page.tsx"
      via: "Link component"
      pattern: "href=.*become-a-sponsor"
---

<objective>
Build the public Become a Sponsor page with pricing table, interest form, and confirmation modal

Purpose: Allow prospective sponsors to view sponsorship tiers and express interest, completing the public-facing sponsorship journey
Output: Fully functional page accessible from Partners page with tier display and form submission
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-public-sponsorship-page/05-CONTEXT.md
@.planning/phases/05-public-sponsorship-page/05-RESEARCH.md
@.planning/phases/05-public-sponsorship-page/05-01-SUMMARY.md

# Existing patterns to follow
@src/app/(public)/partners/page.tsx
@src/components/sections/contact-form.tsx
@src/components/layout/mobile-nav.tsx
@src/components/donations/donation-modal.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create pricing table and confirmation modal components</name>
  <files>src/components/sponsors/pricing-table.tsx, src/components/sponsors/confirmation-modal.tsx</files>
  <action>
Create `src/components/sponsors/pricing-table.tsx`:

1. Accept `packages` prop typed as `SponsorshipPackage[]` from types.ts
2. Filter out packages where closing_date is in the past (if not null)
3. Sort by cost ascending
4. Render responsive grid layout:
   - Mobile: single column (stacked cards)
   - md: 2 columns
   - lg: 4 columns (or number of packages if fewer)
5. Each tier card shows:
   - Package name (h3, white, bold)
   - Price formatted as currency: `$${(pkg.cost / 100).toLocaleString()}` (cost is in cents)
   - Description text (muted)
   - Benefits as checkmark list (map over benefits array)
   - Availability note: "Available until {date}" if closing_date, "Year-round" if null
6. Styling: Match existing site (rounded-xl, border-white/10, bg-background, p-8)
7. No per-tier CTAs - single CTA below table handled by page

Create `src/components/sponsors/confirmation-modal.tsx`:

1. Accept props: `isOpen: boolean`, `onClose: () => void`
2. Use AnimatePresence + motion.div pattern from mobile-nav.tsx
3. Modal content:
   - Backdrop: fixed inset-0, bg-black/80, click to close
   - Content: centered, rounded-xl, bg-background, border
   - Icon: checkmark or success indicator
   - Heading: "Thank You!"
   - Message: "We've received your inquiry and will be in touch within 2-3 business days."
   - Close button: "Close" button that calls onClose
4. Handle Escape key to close (useEffect with keydown listener)
5. Prevent body scroll when open (optional enhancement)
  </action>
  <verify>
- Files exist at specified paths
- `npm run build` passes
- PricingTable accepts packages and renders grid
- ConfirmationModal has AnimatePresence animation
  </verify>
  <done>
- Pricing table displays tiers responsively with benefits lists
- Modal animates in/out with Framer Motion
- Expired packages filtered from display
  </done>
</task>

<task type="auto">
  <name>Task 2: Create interest form component</name>
  <files>src/components/sponsors/interest-form.tsx</files>
  <action>
Create `src/components/sponsors/interest-form.tsx` following contact-form.tsx pattern exactly:

1. Mark as "use client"
2. Import useActionState from react, useForm + zodResolver from react-hook-form
3. Import useReCaptcha from next-recaptcha-v3
4. Import validation schema and server action from Plan 01 outputs
5. Import ConfirmationModal from same directory

State management:
- useForm with zodResolver(sponsorInterestSchema)
- useActionState wrapping submitSponsorInterest
- useState for showModal (boolean)

Form submission flow:
- Get reCAPTCHA token before submit
- Call server action
- On success: reset() form, setShowModal(true)

Form fields (all required):
- Name: text input
- Email: email input
- Phone: tel input
- Company/Organization Name: text input

UI structure:
- Form wrapper with action={formAction}
- Error/success message display (only show success via modal, not inline)
- Each field: label with asterisk, input with inputClassName, error message
- Submit button: "Submit Interest" / "Submitting..." when pending
- reCAPTCHA disclosure text at bottom
- ConfirmationModal with isOpen={showModal} onClose={() => setShowModal(false)}

Styling: Copy inputClassName and form structure from contact-form.tsx exactly
  </action>
  <verify>
- File exists at src/components/sponsors/interest-form.tsx
- `npm run build` passes
- Form has all 4 required fields
- useActionState connected to submitSponsorInterest
- Modal triggered on success
  </verify>
  <done>
- Form validates and submits via server action
- reCAPTCHA token included in submission
- Modal displays on successful submission
- Form resets after success
  </done>
</task>

<task type="auto">
  <name>Task 3: Create page and add Partners page link</name>
  <files>src/app/(public)/become-a-sponsor/page.tsx, src/app/(public)/partners/page.tsx</files>
  <action>
Create `src/app/(public)/become-a-sponsor/page.tsx`:

1. Export metadata:
   - title: "Become a Sponsor | RiseUp Youth Football League"
   - description: "Support youth athletics by becoming a sponsor. View sponsorship packages and express your interest."

2. Server Component that fetches packages:
```typescript
const supabase = await createClient();
const { data: packages } = await supabase
  .from("sponsorship_packages")
  .select("*")
  .order("cost", { ascending: true });
```

3. Page structure (no hero, per CONTEXT.md):
   - Opening section with heading "Become a Sponsor" and brief intro paragraph about why sponsoring matters (community impact, visibility, supporting youth athletics)
   - PricingTable component with packages
   - CTA button below table: "Express Your Interest" that scrolls to form section
   - Form section with id="interest-form":
     - Heading: "Express Your Interest"
     - Subheading explaining what happens after submission
     - InterestForm component

4. Scroll behavior: CTA button uses `document.getElementById("interest-form")?.scrollIntoView({ behavior: "smooth" })`
   - Since this is a Server Component, wrap the button in a Client Component or use inline onClick

Modify `src/app/(public)/partners/page.tsx`:

1. In the "Become a Partner" section, add a prominent link to /become-a-sponsor
2. Location: After the intro paragraph, before the sponsor submission form
3. Add: Link styled as button "View Sponsorship Packages" pointing to /become-a-sponsor
4. Or: Update the section heading/text to include "View our sponsorship packages" with Link

Keep existing sponsor submission form (for existing partners to submit logos) - the new page is for prospective sponsors to express interest.
  </action>
  <verify>
- Files exist at specified paths
- `npm run build` passes
- /become-a-sponsor page renders with pricing table and form
- /partners page has link to /become-a-sponsor
- `curl -s http://localhost:3000/become-a-sponsor` returns 200 (if dev server running)
  </verify>
  <done>
- Page accessible at /become-a-sponsor with full content
- Partners page links to new page
- Pricing table displays packages from database
- Form connected to server action
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete public sponsorship page with pricing table, interest form, and confirmation modal</what-built>
  <how-to-verify>
1. Start dev server: `npm run dev`
2. Visit http://localhost:3000/partners
3. Find and click "View Sponsorship Packages" link (or similar)
4. Verify you land on /become-a-sponsor page
5. Verify pricing table shows sponsorship tiers with names, prices, benefits
6. Click "Express Your Interest" button - should scroll to form
7. Fill out form with test data:
   - Name: Test User
   - Email: test@example.com (use your real email to verify receipt)
   - Phone: 5551234567
   - Company: Test Company
8. Submit form
9. Verify confirmation modal appears with thank you message
10. Close modal and verify form is reset
11. Check email inbox for confirmation email (if Resend configured)

Mobile testing:
12. Open DevTools, switch to mobile viewport (375px width)
13. Verify pricing cards stack vertically
14. Verify form is usable on mobile
  </how-to-verify>
  <resume-signal>Type "approved" if page works correctly, or describe issues found</resume-signal>
</task>

</tasks>

<verification>
1. Page exists at /become-a-sponsor with pricing table and form
2. Partners page has link to new page
3. Form submission triggers modal and sends emails
4. All components follow existing codebase patterns
5. Responsive design works on mobile
</verification>

<success_criteria>
- [ ] SPUB-01: User can access "Become a Sponsor" page from Partners page link
- [ ] SPUB-02: User can view sponsorship tier table with names, prices, and benefits
- [ ] SPUB-03: User can submit sponsor interest form with contact info
- [ ] SPUB-04: User receives confirmation message after submitting (modal)
- [ ] Human verification checkpoint passed
</success_criteria>

<output>
After completion, create `.planning/phases/05-public-sponsorship-page/05-02-SUMMARY.md`
</output>
