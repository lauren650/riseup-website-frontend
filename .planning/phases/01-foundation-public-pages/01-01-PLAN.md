---
phase: 01-foundation-public-pages
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - tailwind.config.ts
  - next.config.ts
  - src/app/layout.tsx
  - src/app/globals.css
  - src/app/page.tsx
  - src/lib/supabase/client.ts
  - src/lib/supabase/server.ts
  - src/lib/utils.ts
  - .env.local.example
  - vercel.json
autonomous: true

must_haves:
  truths:
    - "Next.js dev server starts without errors"
    - "TypeScript compilation succeeds"
    - "Tailwind CSS dark theme renders correctly"
    - "Supabase client connects (or gracefully handles missing credentials)"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies"
      contains: "next"
    - path: "src/app/layout.tsx"
      provides: "Root layout with dark theme"
      min_lines: 20
    - path: "src/app/globals.css"
      provides: "Tailwind imports and dark theme CSS variables"
      contains: "@import"
    - path: "tailwind.config.ts"
      provides: "Dark-first theme configuration"
      contains: "darkMode"
    - path: "src/lib/supabase/server.ts"
      provides: "Server-side Supabase client"
      contains: "createServerClient"
    - path: "src/lib/utils.ts"
      provides: "cn() utility for class merging"
      contains: "twMerge"
  key_links:
    - from: "src/app/layout.tsx"
      to: "src/app/globals.css"
      via: "CSS import"
      pattern: "import.*globals.css"
    - from: "src/lib/supabase/server.ts"
      to: "process.env"
      via: "Environment variables"
      pattern: "process\\.env\\.NEXT_PUBLIC_SUPABASE"
---

<objective>
Set up the Next.js 15 project foundation with TypeScript, Tailwind CSS dark theme, and Supabase client configuration.

Purpose: Establish the technical foundation that all subsequent plans build upon. This creates the development environment, dark-first design system, and database connectivity.

Output: A working Next.js project that starts without errors, displays a dark-themed placeholder page, and has Supabase clients ready for data fetching.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-public-pages/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Next.js 15 project with TypeScript and Tailwind</name>
  <files>
    - package.json
    - tsconfig.json
    - tailwind.config.ts
    - next.config.ts
    - src/app/layout.tsx
    - src/app/globals.css
    - src/app/page.tsx
    - src/lib/utils.ts
  </files>
  <action>
    Create a new Next.js 15 project using create-next-app with the following settings:
    - TypeScript: Yes
    - ESLint: Yes
    - Tailwind CSS: Yes
    - src/ directory: Yes
    - App Router: Yes
    - Turbopack: Yes (default for dev)
    - Import alias: @/* for src/*

    After creation, install additional dependencies:
    ```bash
    npm install framer-motion clsx tailwind-merge
    npm install react-hook-form zod @hookform/resolvers
    npm install @supabase/supabase-js @supabase/ssr
    npm install resend next-recaptcha-v3
    ```

    Configure Tailwind for dark-first theme in tailwind.config.ts:
    - Set darkMode: 'class'
    - Extend colors: background (#000000), foreground (#ffffff), muted (#f1f0ea), accent (#dff140), muted-foreground (rgba(255,255,255,0.6))
    - Add font family configuration for Inter (default sans) using next/font

    Update globals.css with:
    - Tailwind v4 @import "tailwindcss" directive
    - CSS custom properties for dark theme colors (--background, --foreground, --muted, --accent)
    - Apply bg-background text-foreground to body

    Create src/lib/utils.ts with cn() utility:
    - Import clsx and tailwind-merge
    - Export cn() function that combines clsx and twMerge

    Update layout.tsx:
    - Import Inter font from next/font/google
    - Add inline script to prevent FOUC (set dark class before paint)
    - Apply font variable and dark class to html element
    - Set metadata: title "RiseUp Youth Football League", description about the program

    Update page.tsx with placeholder:
    - Dark background, centered white text saying "RiseUp Youth Football League"
    - Subtitle: "Coming Soon"
    - This confirms the dark theme renders correctly
  </action>
  <verify>
    Run `npm run dev` and confirm:
    1. Server starts without errors on http://localhost:3000
    2. Page displays dark background (#000) with white text
    3. No console errors in browser
    4. `npm run build` completes without TypeScript errors
  </verify>
  <done>
    Next.js 15 project runs with TypeScript, Tailwind dark theme displays correctly, all dependencies installed
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure Supabase clients and environment variables</name>
  <files>
    - src/lib/supabase/client.ts
    - src/lib/supabase/server.ts
    - src/lib/supabase/types.ts
    - .env.local.example
    - .gitignore
  </files>
  <action>
    Create Supabase client configuration following @supabase/ssr patterns:

    src/lib/supabase/client.ts (browser client):
    ```typescript
    import { createBrowserClient } from '@supabase/ssr'

    export function createClient() {
      return createBrowserClient(
        process.env.NEXT_PUBLIC_SUPABASE_URL!,
        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
      )
    }
    ```

    src/lib/supabase/server.ts (server client):
    - Use createServerClient from @supabase/ssr
    - Import cookies from next/headers
    - Create async function that awaits cookies() (Next.js 15 requirement)
    - Handle cookie getAll/setAll with try-catch for Server Component context
    - Reference the pattern from 01-RESEARCH.md

    src/lib/supabase/types.ts:
    - Create placeholder Database type that will be replaced with generated types later
    - Export type Database = {} for now

    Create .env.local.example with required variables:
    ```
    # Supabase
    NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
    NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

    # reCAPTCHA (for contact form)
    NEXT_PUBLIC_RECAPTCHA_SITE_KEY=your_recaptcha_site_key
    RECAPTCHA_SECRET_KEY=your_recaptcha_secret_key

    # Email (Resend)
    RESEND_API_KEY=your_resend_api_key
    CONTACT_EMAIL=admin@riseupyouthfootball.com
    ```

    Update .gitignore to ensure .env.local is ignored (should already be there from create-next-app, verify).

    IMPORTANT: Do NOT create actual .env.local with real credentials. Only create .env.local.example as documentation.
  </action>
  <verify>
    1. Confirm files exist: `ls src/lib/supabase/`
    2. Confirm .env.local.example exists with all variables documented
    3. Run `npm run build` - should succeed (clients handle missing env vars gracefully at build time)
    4. TypeScript should not error on the Supabase client files
  </verify>
  <done>
    Supabase server and browser clients configured, environment variables documented in .env.local.example
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Vercel deployment configuration</name>
  <files>
    - vercel.json
    - next.config.ts
  </files>
  <action>
    Create vercel.json with optimal settings for Next.js:
    ```json
    {
      "$schema": "https://openapi.vercel.sh/vercel.json",
      "framework": "nextjs",
      "regions": ["iad1"],
      "headers": [
        {
          "source": "/(.*)",
          "headers": [
            {
              "key": "X-Content-Type-Options",
              "value": "nosniff"
            },
            {
              "key": "X-Frame-Options",
              "value": "DENY"
            },
            {
              "key": "X-XSS-Protection",
              "value": "1; mode=block"
            }
          ]
        }
      ]
    }
    ```

    Update next.config.ts for production optimization:
    - Enable image optimization with allowed domains (placeholder for Supabase storage domain)
    - Configure remotePatterns for images from Supabase Storage
    - Add experimental optimizations if beneficial (check Next.js 15 defaults)

    Example next.config.ts:
    ```typescript
    import type { NextConfig } from 'next'

    const nextConfig: NextConfig = {
      images: {
        remotePatterns: [
          {
            protocol: 'https',
            hostname: '*.supabase.co',
            pathname: '/storage/v1/object/public/**',
          },
        ],
      },
    }

    export default nextConfig
    ```

    NOTE: Actual Vercel deployment will be done separately - this task only creates the configuration files.
  </action>
  <verify>
    1. vercel.json exists and is valid JSON: `cat vercel.json | jq .`
    2. next.config.ts exists with images configuration
    3. `npm run build` still succeeds
  </verify>
  <done>
    Vercel deployment configuration ready, Next.js configured for image optimization with Supabase Storage
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **Development server**: `npm run dev` starts without errors
2. **Build**: `npm run build` completes successfully with no TypeScript errors
3. **Dark theme**: Browser shows dark background (#000) with white text
4. **No FOUC**: Page refresh shows no white flash
5. **File structure**: `ls -la src/` shows app/, lib/, and expected structure
6. **Dependencies**: `npm list` shows all required packages installed
</verification>

<success_criteria>
- Next.js 15 project with App Router runs locally
- TypeScript configured with strict mode
- Tailwind CSS dark-first theme applied (black background, white text, lime accent)
- Supabase clients (server + browser) ready for data fetching
- Environment variables documented in .env.local.example
- Vercel deployment configuration in place
- Build passes with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-public-pages/01-01-SUMMARY.md` using the summary template.
</output>
